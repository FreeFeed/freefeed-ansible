---

- name: Add apt key for the nodesource repository
  become: yes
  apt_key:
    url: https://deb.nodesource.com/gpgkey/nodesource.gpg.key
    state: present
  tags:
    - nodejs

- name: Add the nodesource apt repository
  become: yes
  apt_repository: repo="deb https://deb.nodesource.com/node_12.x buster main" state=present
  tags:
    - nodejs

- name: Install NodeJS packages
  become: yes
  apt: name=nodejs state=latest update_cache=yes
  tags:
    - nodejs

- name: Update alternatives
  become: yes
  alternatives: name=node path=/usr/bin/nodejs link=/usr/bin/node
  tags:
    - nodejs

